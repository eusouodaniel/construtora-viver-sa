<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Api.Tests/Controllers/Requests/EditarObraRequestTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using AutoFixture;
using ConstrutoraViverSA.Api.Controllers.Requests;
using ConstrutoraViverSA.Domain.Enums;
using ConstrutoraViverSA.Domain.Exceptions;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Api.Tests.Controllers.Requests;

public class EditarObraRequestTests
{
    private readonly Fixture _fixture = new Fixture();


    [Fact]
    public void ValidarEdicao_ComDadosValidos_DeveRetornarComoEsperado(){
        var request = _fixture.Build&lt;EditarObraRequest&gt;()
            .With(x =&gt; x.PrazoConclusao, DateTime.Today.AddDays(1))
            .Create();

        Action result = () =&gt; request.ValidarEdicao();

        result.Should().NotThrow&lt;ErroValidacaoException&gt;();
    }
    
    [Theory]
    [InlineData(&quot; &quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, 10.80, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot; &quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, 10.80, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, null, &quot; &quot;, 10.80, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot; &quot;, 10.80, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, 0, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, -1, &quot;2000-10-10&quot;, 1)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, 10.80, &quot;2000-10-10&quot;, 0)]
    [InlineData(&quot;nome&quot;, &quot;endereco&quot;, TipoObraEnum.Ambas, &quot;descricao&quot;, 10.80, &quot;2000-10-10&quot;, -1)]
    public void ValidarEdicao_ComDadosInvalidos_DeveRetornarComoEsperado(string nome, string endereco, TipoObraEnum? tipoObra, string descricao, double? valor, string prazoConclusao, long? orcamentoId)
    {
        var request = new EditarObraRequest()
        {
            Nome = nome,
            Endereco = endereco,
            Descricao = descricao,
            TipoObra = tipoObra,
            PrazoConclusao = prazoConclusao is not null ? DateTime.Parse(prazoConclusao) : null,
            OrcamentoId = orcamentoId,
            Valor = valor
        };
        
        var result = () =&gt; request.ValidarEdicao();

        result.Should().Throw&lt;ErroValidacaoException&gt;();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,5,14,55,1],[18,73,18,74,1],[19,9,21,23,1],[23,9,23,31,1],[23,31,23,54,1],[23,54,23,55,1],[25,9,25,60,1],[26,5,26,6,1],[38,5,38,6,1],[39,9,48,11,1],[50,9,50,28,1],[50,28,50,51,1],[50,51,50,52,1],[52,9,52,57,1],[53,5,53,6,1]]);
    </script>
  </body>
</html>