<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Api.Tests/Controllers/Validators/CriarFuncionarioValidatorTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using AutoFixture;
using ConstrutoraViverSA.Api.Controllers.Requests;
using ConstrutoraViverSA.Api.Controllers.Validators;
using ConstrutoraViverSA.Domain.Enums;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Api.Tests.Controllers.Validators;

public class CriarFuncionarioValidatorTests
{
    private readonly CriarFuncionarioValidator _validator = new CriarFuncionarioValidator();
    private readonly Fixture _fixture = new Fixture();
    private const string CPF_VALIDO = &quot;14533067573&quot;;
    private const string CPF_INVALIDO = &quot;14536067573&quot;;
    private const string EMAIL_VALIDO = &quot;email@email&quot;;

    [Fact]
    public void CriarFuncionarioValidator_DadoUmNomeValido_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(null)]
    [InlineData(&quot; &quot;)]
    [InlineData(&quot;012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&quot;)]
    public void CriarFuncionarioValidator_DadoUmNomeInvalido_DeveRetornarErros(string nome)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Nome, nome)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Fact]
    public void CriarFuncionarioValidator_DadoUmaDataNascimentoValida_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.DataNascimento, DateTime.Today)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }

    [Fact]
    public void CriarFuncionarioValidator_DadoUmaDataNascimentoInvalida_DeveRetornarErros()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Without(x =&gt; x.DataNascimento)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(GeneroEnum.Feminino)]
    [InlineData(GeneroEnum.Masculino)]
    [InlineData(GeneroEnum.NaoBinario)]
    [InlineData(GeneroEnum.Outro)]
    public void CriarFuncionarioValidator_DadoUmGeneroValido_NaoDeveRetornarErros(GeneroEnum genero)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Genero, genero)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(1455767)]
    [InlineData(null)]
    public void CriarFuncionarioValidator_DadoUmGeneroInvalido_DeveRetornarErros(int? genero)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Genero, genero is null ? null : (GeneroEnum)genero)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Fact]
    public void CriarFuncionarioValidator_DadoUmCpfValido_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(null)]
    [InlineData(&quot;12345678999&quot;)]
    [InlineData(&quot;1234567899&quot;)]
    [InlineData(CPF_INVALIDO)]
    public void CriarFuncionarioValidator_DadoUmCpfInvalido_DeveRetornarErros(string cpf)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, cpf)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;123123&quot;)]
    [InlineData(&quot;numCtpsValido&quot;)]
    public void CriarFuncionarioValidator_DadoUmNumCtpsValido_NaoDeveRetornarErros(string numCtps)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.NumCtps, numCtps)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(null)]
    public void CriarFuncionarioValidator_DadoUmNumCtpsInvalido_DeveRetornarErros(string numCtps)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.NumCtps, numCtps)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Endereco&quot;)]
    [InlineData(&quot;Rua do Saber&quot;)]
    public void CriarFuncionarioValidator_DadoUmEnderecoValido_NaoDeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Endereco, endereco)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(null)]
    public void CriarFuncionarioValidator_DadoUmEnderecoInvalido_DeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Endereco, endereco)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Telefone&quot;)]
    [InlineData(&quot;49988706208&quot;)]
    public void CriarFuncionarioValidator_DadoUmTelefoneValido_NaoDeveRetornarErros(string telefone)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Telefone, telefone)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(null)]
    public void CriarFuncionarioValidator_DadoUmTelefoneInvalido_DeveRetornarErros(string telefone)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Telefone, telefone)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Email@email.com&quot;)]
    [InlineData(&quot;test@test&quot;)]
    [InlineData(&quot;test@test.com.br&quot;)]
    [InlineData(EMAIL_VALIDO)]
    public void CriarFuncionarioValidator_DadoUmEmailValido_NaoDeveRetornarErros(string email)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, email)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(&quot;teste&quot;)]
    [InlineData(&quot;@teste.com&quot;)]
    [InlineData(null)]
    public void CriarFuncionarioValidator_DadoUmEmailInvalido_DeveRetornarErros(string email)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, email)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(CargoEnum.Almoxarife)]
    [InlineData(CargoEnum.Arquiteto)]
    [InlineData(CargoEnum.AnalistaFinanceiro)]
    [InlineData(CargoEnum.MestreObras)]
    public void CriarFuncionarioValidator_DadoUmCargoValido_NaoDeveRetornarErros(CargoEnum cargo)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Cargo, cargo)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(null)]
    [InlineData(2143643)]
    public void CriarFuncionarioValidator_DadoUmCargoInvalido_DeveRetornarErros(int? cargo)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Cargo, cargo is null ? null : (CargoEnum)cargo)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,5,13,93,1],[14,5,14,55,1],[21,5,21,6,1],[22,9,25,23,1],[27,9,27,61,1],[29,9,29,52,1],[30,5,30,6,1],[37,5,37,6,1],[38,9,42,23,1],[44,9,44,61,1],[46,9,46,53,1],[47,5,47,6,1],[51,5,51,6,1],[52,9,56,23,1],[58,9,58,61,1],[60,9,60,52,1],[61,5,61,6,1],[65,5,65,6,1],[66,9,70,23,1],[72,9,72,61,1],[74,9,74,53,1],[75,5,75,6,1],[83,5,83,6,1],[84,9,88,23,1],[90,9,90,61,1],[92,9,92,52,1],[93,5,93,6,1],[99,5,99,6,1],[100,9,104,23,1],[106,9,106,61,1],[108,9,108,53,1],[109,5,109,6,1],[113,5,113,6,1],[114,9,117,23,1],[119,9,119,61,1],[121,9,121,52,1],[122,5,122,6,1],[131,5,131,6,1],[132,9,135,23,1],[137,9,137,61,1],[139,9,139,53,1],[140,5,140,6,1],[146,5,146,6,1],[147,9,151,23,1],[153,9,153,61,1],[155,9,155,52,1],[156,5,156,6,1],[162,5,162,6,1],[163,9,167,23,1],[169,9,169,61,1],[171,9,171,53,1],[172,5,172,6,1],[178,5,178,6,1],[179,9,183,23,1],[185,9,185,61,1],[187,9,187,52,1],[188,5,188,6,1],[194,5,194,6,1],[195,9,199,23,1],[201,9,201,61,1],[203,9,203,53,1],[204,5,204,6,1],[210,5,210,6,1],[211,9,215,23,1],[217,9,217,61,1],[219,9,219,52,1],[220,5,220,6,1],[226,5,226,6,1],[227,9,231,23,1],[233,9,233,61,1],[235,9,235,53,1],[236,5,236,6,1],[244,5,244,6,1],[245,9,248,23,1],[250,9,250,61,1],[252,9,252,52,1],[253,5,253,6,1],[261,5,261,6,1],[262,9,265,23,1],[267,9,267,61,1],[269,9,269,53,1],[270,5,270,6,1],[278,5,278,6,1],[279,9,283,23,1],[285,9,285,61,1],[287,9,287,52,1],[288,5,288,6,1],[294,5,294,6,1],[295,9,299,23,1],[301,9,301,61,1],[303,9,303,53,1],[304,5,304,6,1]]);
    </script>
  </body>
</html>