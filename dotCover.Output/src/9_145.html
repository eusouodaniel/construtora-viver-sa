<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Api.Tests/Controllers/Validators/EditarFuncionarioValidatorTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Diagnostics.CodeAnalysis;
using AutoFixture;
using ConstrutoraViverSA.Api.Controllers.Requests;
using ConstrutoraViverSA.Api.Controllers.Validators;
using ConstrutoraViverSA.Domain.Enums;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Api.Tests.Controllers.Validators;

public class EditarFuncionarioValidatorTests
{
    private readonly EditarFuncionarioValidator _validator = new EditarFuncionarioValidator();
    private readonly Fixture _fixture = new Fixture();
    private const string CPF_VALIDO = &quot;14533067573&quot;;
    private const string CPF_INVALIDO = &quot;14536067573&quot;;
    private const string EMAIL_VALIDO = &quot;email@email&quot;;

    [Theory]
    [InlineData(&quot;nome&quot;)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmNomeValido_NaoDeveRetornarErros(string nome)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Nome, nome)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(&quot;012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&quot;)]
    public void EditarFuncionarioValidator_DadoUmNomeInvalido_DeveRetornarErros(string nome)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Nome, nome)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;2000-10-10&quot;)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmaDataNascimentoValida_NaoDeveRetornarErros(string dataNascimentoString)
    {
        var dataNascimento = (dataNascimentoString is not null) ? DateTime.Parse(dataNascimentoString) : (DateTime?)null;
        
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.DataNascimento, dataNascimento)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }

    [Theory]
    [InlineData(GeneroEnum.Feminino)]
    [InlineData(GeneroEnum.Masculino)]
    [InlineData(GeneroEnum.NaoBinario)]
    [InlineData(GeneroEnum.Outro)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmGeneroValido_NaoDeveRetornarErros(GeneroEnum? genero)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Genero, genero)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(1389874)]
    public void EditarFuncionarioValidator_DadoUmGeneroInvalido_DeveRetornarErros(int genero)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Genero, (GeneroEnum)genero)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(CPF_VALIDO)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmCpfValido_NaoDeveRetornarErros(string cpf)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, cpf)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(&quot;12345678999&quot;)]
    [InlineData(&quot;1234567899&quot;)]
    [InlineData(CPF_INVALIDO)]
    public void EditarFuncionarioValidator_DadoUmCpfInvalido_DeveRetornarErros(string cpf)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, cpf)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;123123&quot;)]
    [InlineData(&quot;numCtpsValido&quot;)]    
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmNumCtpsValido_NaoDeveRetornarErros(string numCtps)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.NumCtps, numCtps)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    public void EditarFuncionarioValidator_DadoUmNumCtpsInvalido_DeveRetornarErros(string numCtps)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.NumCtps, numCtps)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Endereco&quot;)]
    [InlineData(&quot;Rua do Saber&quot;)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmEnderecoValido_NaoDeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Endereco, endereco)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    public void EditarFuncionarioValidator_DadoUmEnderecoInvalido_DeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Endereco, endereco)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Telefone&quot;)]
    [InlineData(&quot;49988706208&quot;)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmTelefoneValido_NaoDeveRetornarErros(string telefone)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Telefone, telefone)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    public void EditarFuncionarioValidator_DadoUmTelefoneInvalido_DeveRetornarErros(string telefone)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Telefone, telefone)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Email@email.com&quot;)]
    [InlineData(&quot;test@test&quot;)]
    [InlineData(&quot;test@test.com.br&quot;)]
    [InlineData(EMAIL_VALIDO)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmEmailValido_NaoDeveRetornarErros(string email)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, email)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    [InlineData(&quot;teste&quot;)]
    [InlineData(&quot;@teste.com&quot;)]
    public void EditarFuncionarioValidator_DadoUmEmailInvalido_DeveRetornarErros(string email)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, email)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(CargoEnum.Almoxarife)]
    [InlineData(CargoEnum.Arquiteto)]
    [InlineData(CargoEnum.AnalistaFinanceiro)]
    [InlineData(CargoEnum.MestreObras)]
    [InlineData(null)]
    public void EditarFuncionarioValidator_DadoUmCargoValido_NaoDeveRetornarErros(CargoEnum? cargo)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Cargo, cargo)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(243)]
    public void EditarFuncionarioValidator_DadoUmCargoInvalido_DeveRetornarErros(int cargo)
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, EMAIL_VALIDO)
            .With(x =&gt; x.Cargo, (CargoEnum)cargo)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,5,14,95,1],[15,5,15,55,1],[24,5,24,6,1],[25,9,29,23,1],[31,9,31,61,1],[33,9,33,52,1],[34,5,34,6,1],[40,5,40,6,1],[41,9,45,23,1],[47,9,47,61,1],[49,9,49,53,1],[50,5,50,6,1],[56,5,56,6,1],[57,9,57,122,1],[59,9,63,23,1],[65,9,65,61,1],[67,9,67,52,1],[68,5,68,6,1],[77,5,77,6,1],[78,9,82,23,1],[84,9,84,61,1],[86,9,86,52,1],[87,5,87,6,1],[92,5,92,6,1],[93,9,97,23,1],[99,9,99,61,1],[101,9,101,53,1],[102,5,102,6,1],[108,5,108,6,1],[109,9,112,23,1],[114,9,114,61,1],[116,9,116,52,1],[117,5,117,6,1],[125,5,125,6,1],[126,9,129,23,1],[131,9,131,61,1],[133,9,133,53,1],[134,5,134,6,1],[141,5,141,6,1],[142,9,146,23,1],[148,9,148,61,1],[150,9,150,52,1],[151,5,151,6,1],[156,5,156,6,1],[157,9,161,23,1],[163,9,163,61,1],[165,9,165,53,1],[166,5,166,6,1],[173,5,173,6,1],[174,9,178,23,1],[180,9,180,61,1],[182,9,182,52,1],[183,5,183,6,1],[188,5,188,6,1],[189,9,193,23,1],[195,9,195,61,1],[197,9,197,53,1],[198,5,198,6,1],[205,5,205,6,1],[206,9,210,23,1],[212,9,212,61,1],[214,9,214,52,1],[215,5,215,6,1],[220,5,220,6,1],[221,9,225,23,1],[227,9,227,61,1],[229,9,229,53,1],[230,5,230,6,1],[239,5,239,6,1],[240,9,243,23,1],[245,9,245,61,1],[247,9,247,52,1],[248,5,248,6,1],[255,5,255,6,1],[256,9,259,23,1],[261,9,261,61,1],[263,9,263,53,1],[264,5,264,6,1],[273,5,273,6,1],[274,9,278,23,1],[280,9,280,61,1],[282,9,282,52,1],[283,5,283,6,1],[288,5,288,6,1],[289,9,293,23,1],[295,9,295,61,1],[297,9,297,53,1],[298,5,298,6,1]]);
    </script>
  </body>
</html>