<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Api.Tests/Controllers/Validators/EditarOrcamentoValidatorTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using AutoFixture;
using ConstrutoraViverSA.Api.Controllers.Requests;
using ConstrutoraViverSA.Api.Controllers.Validators;
using ConstrutoraViverSA.Domain.Enums;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Api.Tests.Controllers.Validators;

public class EditarOrcamentoValidatorTests
{
    private readonly EditarOrcamentoValidator _validator = new EditarOrcamentoValidator();
    private readonly Fixture _fixture = new Fixture();
    
    [Theory]
    [InlineData(&quot;123123&quot;)]
    [InlineData(&quot;descricao&quot;)]
    [InlineData(null)]
    public void EditarOrcamentoValidator_DadoUmDescricaoValido_NaoDeveRetornarErros(string descricao)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Descricao, descricao)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    public void EditarOrcamentoValidator_DadoUmDescricaoInvalido_DeveRetornarErros(string descricao)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Descricao, descricao)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(&quot;Endereco&quot;)]
    [InlineData(&quot;Rua do Saber&quot;)]
    [InlineData(null)]
    public void EditarOrcamentoValidator_DadoUmEnderecoValido_NaoDeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Endereco, endereco)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(&quot; &quot;)]
    public void EditarOrcamentoValidator_DadoUmEnderecoInvalido_DeveRetornarErros(string endereco)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Endereco, endereco)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Theory]
    [InlineData(TipoObraEnum.Ambas)]
    [InlineData(TipoObraEnum.Comercial)]
    [InlineData(TipoObraEnum.Residencial)]
    [InlineData(null)]
    public void EditarOrcamentoValidator_DadoUmTipoValido_NaoDeveRetornarErros(TipoObraEnum? tipoObra)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.TipoObra, tipoObra)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(1455767)]
    public void EditarOrcamentoValidator_DadoUmTipoInvalido_DeveRetornarErros(int? tipoObra)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.TipoObra, tipoObra is null ? null : (TipoObraEnum)tipoObra)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }

    [Theory]
    [InlineData(10.8)]
    [InlineData(1)]
    [InlineData(null)]
    public void EditarOrcamentoValidator_DadoUmValorValido_NaoDeveRetornarErros(double? valor)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Valor, valor)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Theory]
    [InlineData(-1)]
    [InlineData(0)]
    public void EditarOrcamentoValidator_DadoUmValorInvalido_DeveRetornarErros(double? valor)
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.Valor, valor)
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }
    
    [Fact]
    public void EditarOrcamentoValidator_DadoUmaDataEmissaoEDataValidadeEmIntervaloValido_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.DataEmissao, DateTime.Today)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Fact]
    public void EditarOrcamentoValidator_DadoUmaDataEmissaoEDataValidadeEmIntervaloOInvalido_DeveRetornarErros()
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .With(x =&gt; x.DataEmissao, DateTime.Today.AddDays(1))
            .With(x =&gt; x.DataValidade, DateTime.Today)
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeFalse();
    }

    [Fact]
    public void EditarOrcamentoValidator_DadoUmaDataEmissaoNulla_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .Without(x =&gt; x.DataEmissao)
            .With(x =&gt; x.DataValidade, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
    
    [Fact]
    public void EditarOrcamentoValidator_DadoUmaDataValidadeNulla_NaoDeveRetornarErros()
    {
        var request = _fixture.Build&lt;OrcamentoRequest&gt;()
            .Without(x =&gt; x.DataValidade)
            .With(x =&gt; x.DataEmissao, DateTime.Today.AddDays(1))
            .Create();
        
        var validationResult = _validator.Validate(request);
        
        validationResult.IsValid.Should().BeTrue();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,5,13,91,1],[14,5,14,55,1],[21,5,21,6,1],[22,9,26,23,1],[28,9,28,61,1],[30,9,30,52,1],[31,5,31,6,1],[36,5,36,6,1],[37,9,41,23,1],[43,9,43,61,1],[45,9,45,53,1],[46,5,46,6,1],[53,5,53,6,1],[54,9,58,23,1],[60,9,60,61,1],[62,9,62,52,1],[63,5,63,6,1],[68,5,68,6,1],[69,9,73,23,1],[75,9,75,61,1],[77,9,77,53,1],[78,5,78,6,1],[86,5,86,6,1],[87,9,91,23,1],[93,9,93,61,1],[95,9,95,52,1],[96,5,96,6,1],[101,5,101,6,1],[102,9,106,23,1],[108,9,108,61,1],[110,9,110,53,1],[111,5,111,6,1],[118,5,118,6,1],[119,9,123,23,1],[125,9,125,61,1],[127,9,127,52,1],[128,5,128,6,1],[134,5,134,6,1],[135,9,139,23,1],[141,9,141,61,1],[143,9,143,53,1],[144,5,144,6,1],[148,5,148,6,1],[149,9,152,23,1],[154,9,154,61,1],[156,9,156,52,1],[157,5,157,6,1],[161,5,161,6,1],[162,9,165,23,1],[167,9,167,61,1],[169,9,169,53,1],[170,5,170,6,1],[174,5,174,6,1],[175,9,178,23,1],[180,9,180,61,1],[182,9,182,52,1],[183,5,183,6,1],[187,5,187,6,1],[188,9,191,23,1],[193,9,193,61,1],[195,9,195,52,1],[196,5,196,6,1]]);
    </script>
  </body>
</html>