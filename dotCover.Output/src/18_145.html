<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Api.Tests/Controllers/Requests/FuncionarioRequestTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Diagnostics.CodeAnalysis;
using AutoFixture;
using ConstrutoraViverSA.Api.Controllers.Requests;
using ConstrutoraViverSA.Domain.Enums;
using ConstrutoraViverSA.Domain.Exceptions;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Api.Tests.Controllers.Requests;

public class FuncionarioRequestTests
{
    private readonly Fixture _fixture = new Fixture();
    private const string CPF_VALIDO = &quot;14533067573&quot;;
    private const string CPF_INVALIDO = &quot;14536067573&quot;;

    [Fact]
    public void ValidarCriacao_ComDadosValidos_DeveSeComportarComoEsperado()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.DataNascimento, DateTime.Today)
            .With(x =&gt; x.Email, &quot;email@email.com&quot;)
            .Create();

        var result = () =&gt; request.ValidarCriacao();

        result.Should().NotThrow&lt;ErroValidacaoException&gt;();
    }
    
    [Theory]
    [InlineData(null, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot; &quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, null, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, null, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, null, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, &quot; &quot;, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_INVALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, null, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot; &quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, null, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot; &quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot; &quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, null, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot; &quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, null, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, null)]
    public void ValidarCriacao_ComDadosInvalidos_DeveSeComportarComoEsperado(string nome, string dataNascimento, GeneroEnum? genero, string cpf, string numCtps, string endereco, string email, string telefone, CargoEnum? cargo)
    {
        var request = new FuncionarioRequest()
        {
            Nome = nome,
            DataNascimento = dataNascimento is not null ? DateTime.Parse(dataNascimento) : null,
            Genero = genero,
            Cpf = cpf,
            NumCtps = numCtps,
            Endereco = endereco,
            Email = email,
            Telefone = telefone,
            Cargo = cargo
        };
        
        var result = () =&gt; request.ValidarCriacao();
        
        result.Should().Throw&lt;ErroValidacaoException&gt;();
    }
    
    [Fact]
    public void ValidarEdicao_ComDadosValidos_DeveSeComportarComoEsperado()
    {
        var request = _fixture.Build&lt;FuncionarioRequest&gt;()
            .With(x =&gt; x.Cpf, CPF_VALIDO)
            .With(x =&gt; x.Email, &quot;email@email.com&quot;)
            .With(x =&gt; x.DataNascimento, DateTime.Today)
            .Create();
        
        var result = () =&gt; request.ValidarEdicao();

        result.Should().NotThrow&lt;ErroValidacaoException&gt;();
    }
    
    [Theory]
    [InlineData(&quot; &quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, &quot; &quot;, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_INVALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot; &quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot; &quot;, &quot;email@email.com&quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot; &quot;, &quot;49988703656&quot;, CargoEnum.Almoxarife)]
    [InlineData(&quot;nome&quot;, &quot;2000-06-20&quot;, GeneroEnum.Feminino, CPF_VALIDO, &quot;numCtps&quot;, &quot;endereco&quot;, &quot;email@email.com&quot;, &quot; &quot;, CargoEnum.Almoxarife)]
    public void ValidarEdicao_ComDadosInvalidos_DeveSeComportarComoEsperado(string nome, string dataNascimento, GeneroEnum? genero, string cpf, string numCtps, string endereco, string email, string telefone, CargoEnum? cargo)
    {
        var request = new FuncionarioRequest()
        {
            Nome = nome,
            DataNascimento = dataNascimento is not null ? DateTime.Parse(dataNascimento) : null,
            Genero = genero,
            Cpf = cpf,
            NumCtps = numCtps,
            Endereco = endereco,
            Email = email,
            Telefone = telefone,
            Cargo = cargo
        };
        
        var result = () =&gt; request.ValidarEdicao();
        
        result.Should().Throw&lt;ErroValidacaoException&gt;();
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[14,5,14,55,1],[20,5,20,6,1],[21,9,25,23,1],[27,9,27,28,1],[27,28,27,52,1],[27,52,27,53,1],[29,9,29,60,1],[30,5,30,6,1],[51,5,51,6,1],[52,9,63,11,1],[65,9,65,28,1],[65,28,65,52,1],[65,52,65,53,1],[67,9,67,57,1],[68,5,68,6,1],[72,5,72,6,1],[73,9,77,23,1],[79,9,79,28,1],[79,28,79,51,1],[79,51,79,52,1],[81,9,81,60,1],[82,5,82,6,1],[94,5,94,6,1],[95,9,106,11,1],[108,9,108,28,1],[108,28,108,51,1],[108,51,108,52,1],[110,9,110,57,1],[111,5,111,6,1]]);
    </script>
  </body>
</html>