<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/tests/ConstrutoraViverSA.Domain.Tests/OrcamentoTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoFixture;
using ConstrutoraViverSA.Domain.Enums;
using ConstrutoraViverSA.Domain.Exceptions;
using FluentAssertions;
using Xunit;

namespace ConstrutoraViverSA.Domain.Tests;

public class OrcamentoTests
{
    private readonly Fixture _fixture = new Fixture();

    [Fact]
    public void Construtor_ComDadosValidos_DeveConstruirCorretamente()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        var result = new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);

        result.Should().NotBeNull();
        result.Descricao.Should().Be(descricao);
        result.Endereco.Should().Be(endereco);
        result.TipoObra.Should().Be(tipoObra);
        result.DataEmissao.Should().Be(dataEmissao);
        result.DataValidade.Should().Be(dataValidade);
        result.Valor.Should().Be(valor);
    }
    
    [Fact]
    public void Construtor_ComDescricaoInvalida_DeveLancarExcecao()
    {
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(null, endereco, tipoObra, dataEmissao, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComEnderecoInvalido_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, null, tipoObra, dataEmissao, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComTipoObraInvalido_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, null, dataEmissao, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComDataEmissaoNull_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, null, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComDataEmissaoInvalida_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, DateTime.MinValue, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComDataValidadeNull_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, dataEmissao, null, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComDataValidadeInvalida_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, dataEmissao, DateTime.MinValue, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComIntervaloDataEmissaoEDataValidadeInvalido_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today.AddDays(1);
        var dataValidade = DateTime.Today;
        var valor = _fixture.Create&lt;double&gt;();

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void Construtor_ComValorInvalido_DeveLancarExcecao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);

        Action result = () =&gt; new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, null);

        result.Should().Throw&lt;OrcamentoInvalidoException&gt;();
    }
    
    [Fact]
    public void SetDescricao_ComDadosValidos_DeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var descricaoNova = _fixture.Create&lt;string&gt;();
        
        orcamento.SetDescricao(descricaoNova);

        orcamento.Descricao.Should().Be(descricaoNova);
    }
    
    [Fact]
    public void SetDescricao_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var descricaoAntiga = orcamento.Descricao;
        
        orcamento.SetDescricao(null);

        orcamento.Descricao.Should().Be(descricaoAntiga);
    }
    
    [Fact]
    public void SetEndereco_ComDadosValidos_DeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var enderecoNova = _fixture.Create&lt;string&gt;();
        
        orcamento.SetEndereco(enderecoNova);

        orcamento.Endereco.Should().Be(enderecoNova);
    }
    
    [Fact]
    public void SetEndereco_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var enderecoAntiga = orcamento.Endereco;
        
        orcamento.SetEndereco(null);

        orcamento.Endereco.Should().Be(enderecoAntiga);
    }
    
    [Fact]
    public void SetTipoObra_ComDadosValidos_DeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var tipoObraNovo = _fixture.Create&lt;TipoObraEnum&gt;();
        
        orcamento.SetTipoObra(tipoObraNovo);

        orcamento.TipoObra.Should().Be(tipoObraNovo);
    }
    
    [Fact]
    public void SetTipoObra_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var tipoObraAntigo = orcamento.TipoObra;
        
        orcamento.SetTipoObra(null);

        orcamento.TipoObra.Should().Be(tipoObraAntigo);
    }
    
    [Fact]
    public void SetDataEmissao_ComDadosValidos_DeveRealizarAlteracao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(2);
        var valor = _fixture.Create&lt;double&gt;();

        var orcamento = new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);
        var dataEmissaoNova = dataEmissao.AddDays(1);
        
        orcamento.SetDataEmissao(dataEmissaoNova);

        orcamento.DataEmissao.Should().Be(dataEmissaoNova);
    }
    
    [Fact]
    public void SetDataEmissao_ComDadoNull_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var dataEmissaoAntigo = orcamento.DataEmissao;
        
        orcamento.SetDataEmissao(null);

        orcamento.DataEmissao.Should().Be(dataEmissaoAntigo);
    }
    
    [Fact]
    public void SetDataEmissao_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(1);
        var valor = _fixture.Create&lt;double&gt;();

        var orcamento = new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);
        
        orcamento.SetDataEmissao(dataValidade.AddDays(+3));

        orcamento.DataEmissao.Should().Be(dataEmissao);
    }
    
    [Fact]
    public void SetDataValidade_ComDadosValidos_DeveRealizarAlteracao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(2);
        var valor = _fixture.Create&lt;double&gt;();
        var dataValidadeNovo = dataValidade.AddDays(1);
        var orcamento = new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);
        
        orcamento.SetDataValidade(dataValidadeNovo);

        orcamento.DataValidade.Should().Be(dataValidadeNovo);
    }
    
    [Fact]
    public void SetDataValidade_ComDadoNull_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var dataValidadeAntigo = orcamento.DataValidade;
        
        orcamento.SetDataValidade(null);

        orcamento.DataValidade.Should().Be(dataValidadeAntigo);
    }
    
    [Fact]
    public void SetDataValidade_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var descricao = _fixture.Create&lt;string&gt;();
        var endereco = _fixture.Create&lt;string&gt;();
        var tipoObra = _fixture.Create&lt;TipoObraEnum&gt;();
        var dataEmissao = DateTime.Today;
        var dataValidade = DateTime.Today.AddDays(2);
        var valor = _fixture.Create&lt;double&gt;();
        var orcamento = new Orcamento(descricao, endereco, tipoObra, dataEmissao, dataValidade, valor);
        
        orcamento.SetDataValidade(dataEmissao.AddDays(-1));

        orcamento.DataValidade.Should().Be(dataValidade);
    }
    
    [Fact]
    public void SetValor_ComDadosValidos_DeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var valorNovo = _fixture.Create&lt;double&gt;();
        
        orcamento.SetValor(valorNovo);

        orcamento.Valor.Should().Be(valorNovo);
    }
    
    [Fact]
    public void SetValor_ComDadosInvalidos_NaoDeveRealizarAlteracao()
    {
        var orcamento = _fixture.Create&lt;Orcamento&gt;();
        var valorAntigo = orcamento.Valor;
        
        orcamento.SetValor(null);

        orcamento.Valor.Should().Be(valorAntigo);
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[11,5,11,55,1],[15,5,15,6,1],[16,9,16,51,1],[17,9,17,50,1],[18,9,18,56,1],[19,9,19,42,1],[20,9,20,54,1],[21,9,21,47,1],[23,9,23,101,1],[25,9,25,37,1],[26,9,26,49,1],[27,9,27,47,1],[28,9,28,47,1],[29,9,29,53,1],[30,9,30,55,1],[31,9,31,41,1],[32,5,32,6,1],[36,5,36,6,1],[37,9,37,50,1],[38,9,38,56,1],[39,9,39,42,1],[40,9,40,54,1],[41,9,41,47,1],[43,9,43,31,1],[43,31,43,104,1],[43,104,43,105,1],[45,9,45,61,1],[46,5,46,6,1],[50,5,50,6,1],[51,9,51,51,1],[52,9,52,56,1],[53,9,53,42,1],[54,9,54,54,1],[55,9,55,47,1],[57,9,57,31,1],[57,31,57,105,1],[57,105,57,106,1],[59,9,59,61,1],[60,5,60,6,1],[64,5,64,6,1],[65,9,65,51,1],[66,9,66,50,1],[67,9,67,42,1],[68,9,68,54,1],[69,9,69,47,1],[71,9,71,31,1],[71,31,71,105,1],[71,105,71,106,1],[73,9,73,61,1],[74,5,74,6,1],[78,5,78,6,1],[79,9,79,51,1],[80,9,80,50,1],[81,9,81,56,1],[82,9,82,54,1],[83,9,83,47,1],[85,9,85,31,1],[85,31,85,102,1],[85,102,85,103,1],[87,9,87,61,1],[88,5,88,6,1],[92,5,92,6,1],[93,9,93,51,1],[94,9,94,50,1],[95,9,95,56,1],[96,9,96,54,1],[97,9,97,47,1],[99,9,99,31,1],[99,31,99,115,1],[99,115,99,116,1],[101,9,101,61,1],[102,5,102,6,1],[106,5,106,6,1],[107,9,107,51,1],[108,9,108,50,1],[109,9,109,56,1],[110,9,110,42,1],[111,9,111,47,1],[113,9,113,31,1],[113,31,113,101,1],[113,101,113,102,1],[115,9,115,61,1],[116,5,116,6,1],[120,5,120,6,1],[121,9,121,51,1],[122,9,122,50,1],[123,9,123,56,1],[124,9,124,42,1],[125,9,125,47,1],[127,9,127,31,1],[127,31,127,114,1],[127,114,127,115,1],[129,9,129,61,1],[130,5,130,6,1],[134,5,134,6,1],[135,9,135,51,1],[136,9,136,50,1],[137,9,137,56,1],[138,9,138,53,1],[139,9,139,43,1],[140,9,140,47,1],[142,9,142,31,1],[142,31,142,109,1],[142,109,142,110,1],[144,9,144,61,1],[145,5,145,6,1],[149,5,149,6,1],[150,9,150,51,1],[151,9,151,50,1],[152,9,152,56,1],[153,9,153,42,1],[154,9,154,54,1],[156,9,156,31,1],[156,31,156,108,1],[156,108,156,109,1],[158,9,158,61,1],[159,5,159,6,1],[163,5,163,6,1],[164,9,164,54,1],[165,9,165,55,1],[167,9,167,47,1],[169,9,169,56,1],[170,5,170,6,1],[174,5,174,6,1],[175,9,175,54,1],[176,9,176,51,1],[178,9,178,38,1],[180,9,180,58,1],[181,5,181,6,1],[185,5,185,6,1],[186,9,186,54,1],[187,9,187,54,1],[189,9,189,45,1],[191,9,191,54,1],[192,5,192,6,1],[196,5,196,6,1],[197,9,197,54,1],[198,9,198,49,1],[200,9,200,37,1],[202,9,202,56,1],[203,5,203,6,1],[207,5,207,6,1],[208,9,208,54,1],[209,9,209,60,1],[211,9,211,45,1],[213,9,213,54,1],[214,5,214,6,1],[218,5,218,6,1],[219,9,219,54,1],[220,9,220,49,1],[222,9,222,37,1],[224,9,224,56,1],[225,5,225,6,1],[229,5,229,6,1],[230,9,230,51,1],[231,9,231,50,1],[232,9,232,56,1],[233,9,233,42,1],[234,9,234,54,1],[235,9,235,47,1],[237,9,237,104,1],[238,9,238,54,1],[240,9,240,51,1],[242,9,242,60,1],[243,5,243,6,1],[247,5,247,6,1],[248,9,248,54,1],[249,9,249,55,1],[251,9,251,40,1],[253,9,253,62,1],[254,5,254,6,1],[258,5,258,6,1],[259,9,259,51,1],[260,9,260,50,1],[261,9,261,56,1],[262,9,262,42,1],[263,9,263,54,1],[264,9,264,47,1],[266,9,266,104,1],[268,9,268,60,1],[270,9,270,56,1],[271,5,271,6,1],[275,5,275,6,1],[276,9,276,51,1],[277,9,277,50,1],[278,9,278,56,1],[279,9,279,42,1],[280,9,280,54,1],[281,9,281,47,1],[282,9,282,56,1],[283,9,283,104,1],[285,9,285,53,1],[287,9,287,62,1],[288,5,288,6,1],[292,5,292,6,1],[293,9,293,54,1],[294,9,294,57,1],[296,9,296,41,1],[298,9,298,64,1],[299,5,299,6,1],[303,5,303,6,1],[304,9,304,51,1],[305,9,305,50,1],[306,9,306,56,1],[307,9,307,42,1],[308,9,308,54,1],[309,9,309,47,1],[310,9,310,104,1],[312,9,312,60,1],[314,9,314,58,1],[315,5,315,6,1],[319,5,319,6,1],[320,9,320,54,1],[321,9,321,51,1],[323,9,323,39,1],[325,9,325,48,1],[326,5,326,6,1],[330,5,330,6,1],[331,9,331,54,1],[332,9,332,43,1],[334,9,334,34,1],[336,9,336,50,1],[337,5,337,6,1]]);
    </script>
  </body>
</html>