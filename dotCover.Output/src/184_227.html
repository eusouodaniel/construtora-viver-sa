<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/src/ConstrutoraViverSA.Application/Services/FuncionarioService.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using AutoMapper;
using ConstrutoraViverSA.Application.Interfaces;
using ConstrutoraViverSA.Domain;
using ConstrutoraViverSA.Domain.Dtos;
using ConstrutoraViverSA.Domain.Exceptions;
using ConstrutoraViverSA.Repository.Interfaces;

namespace ConstrutoraViverSA.Application.Services;

public class FuncionarioService : IFuncionarioService
{
    private readonly IFuncionarioRepository _repository;
    private readonly IMapper _mapper;

    public FuncionarioService(IFuncionarioRepository repository, IMapper mapper)
    {
        _repository = repository;
        _mapper = mapper;
    }

    public List&lt;FuncionarioDto&gt; BuscarTodos()
    {
        var funcionarios = _repository.BuscarTodos();

        var listaFuncionariosDto = new List&lt;FuncionarioDto&gt;();
            
        funcionarios.ForEach(x =&gt; listaFuncionariosDto.Add(_mapper.Map&lt;FuncionarioDto&gt;(x)));

        return listaFuncionariosDto;
    }

    public Funcionario BuscarEntidadePorId(long buscaId)
    {
        var funcionario = _repository.BuscarPorId(buscaId);

        if (funcionario is null) throw new NaoEncontradoException(&quot;Funcion&#225;rio n&#227;o encontrado&quot;);

        return funcionario;
    }

    public FuncionarioDto BuscarPorId(long buscaId)
    {
        var funcionario = BuscarEntidadePorId(buscaId);
        
        return _mapper.Map&lt;FuncionarioDto&gt;(funcionario);
    }

    public void Adicionar(FuncionarioDto dto)
    {
        var funcionario = new Funcionario(dto.Nome, dto.DataNascimento, dto.Genero, dto.Cpf, dto.NumCtps, dto.Endereco,
            dto.Email, dto.Telefone, dto.Cargo);
        _repository.Adicionar(funcionario);
    }

    public void Excluir(long idExcluir)
    {
        var funcionario = BuscarEntidadePorId(idExcluir);

        _repository.Excluir(funcionario);
    }

    public void Editar(long id, FuncionarioDto dto)
    {
        var funcionario = BuscarEntidadePorId(id);

        funcionario.SetNome(dto.Nome);
        funcionario.SetDataNascimento(dto.DataNascimento);
        funcionario.SetGenero(dto.Genero);
        funcionario.SetCpf(dto.Cpf);
        funcionario.SetNumCtps(dto.NumCtps);
        funcionario.SetEndereco(dto.Endereco);
        funcionario.SetEmail(dto.Email);
        funcionario.SetTelefone(dto.Telefone);
        funcionario.SetCargo(dto.Cargo);

        _repository.Editar(funcionario);
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[16,5,16,81,1],[17,5,17,6,1],[18,9,18,34,1],[19,9,19,26,1],[20,5,20,6,1],[23,5,23,6,1],[24,9,24,54,1],[26,9,26,63,1],[28,9,28,35,1],[28,35,28,91,1],[28,91,28,93,1],[30,9,30,37,1],[31,5,31,6,1],[34,5,34,6,1],[35,9,35,60,1],[37,9,37,33,1],[37,34,37,97,1],[39,9,39,28,1],[40,5,40,6,1],[43,5,43,6,1],[44,9,44,56,1],[46,9,46,57,1],[47,5,47,6,1],[50,5,50,6,1],[51,9,52,49,1],[53,9,53,44,1],[54,5,54,6,1],[57,5,57,6,1],[58,9,58,58,1],[60,9,60,42,1],[61,5,61,6,1],[64,5,64,6,1],[65,9,65,51,1],[67,9,67,39,1],[68,9,68,59,1],[69,9,69,43,1],[70,9,70,37,1],[71,9,71,45,1],[72,9,72,47,1],[73,9,73,41,1],[74,9,74,47,1],[75,9,75,41,1],[77,9,77,41,1],[78,5,78,6,1]]);
    </script>
  </body>
</html>