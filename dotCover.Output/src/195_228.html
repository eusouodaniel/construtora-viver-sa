<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/vieir4ndo/Workspace/construtora-viver-sa/src/ConstrutoraViverSA.Infrastructure/Migrations/20221016212527_InitMigration.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Microsoft.EntityFrameworkCore.Migrations;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

namespace ConstrutoraViverSA.Infrastructure.Migrations
{
    public partial class InitMigration : Migration
    {
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.CreateTable(
                name: &quot;Funcionario&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    Nome = table.Column&lt;string&gt;(type: &quot;character varying(80)&quot;, maxLength: 80, nullable: false),
                    DataNascimento = table.Column&lt;DateTime&gt;(type: &quot;timestamp without time zone&quot;, nullable: false),
                    Genero = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false),
                    Cpf = table.Column&lt;string&gt;(type: &quot;character varying(11)&quot;, maxLength: 11, nullable: false),
                    NumCtps = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Endereco = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Email = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Telefone = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Cargo = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_Funcionario&quot;, x =&gt; x.Id);
                });

            migrationBuilder.CreateTable(
                name: &quot;Material&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    Nome = table.Column&lt;string&gt;(type: &quot;character varying(80)&quot;, maxLength: 80, nullable: false),
                    Descricao = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Tipo = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false),
                    Valor = table.Column&lt;double&gt;(type: &quot;double precision&quot;, nullable: false),
                    Quantidade = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false, defaultValue: 0)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_Material&quot;, x =&gt; x.Id);
                });

            migrationBuilder.CreateTable(
                name: &quot;Orcamento&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    Descricao = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Endereco = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    TipoObra = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false),
                    DataEmissao = table.Column&lt;DateTime&gt;(type: &quot;timestamp without time zone&quot;, nullable: false),
                    DataValidade = table.Column&lt;DateTime&gt;(type: &quot;timestamp without time zone&quot;, nullable: false),
                    Valor = table.Column&lt;double&gt;(type: &quot;double precision&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_Orcamento&quot;, x =&gt; x.Id);
                });

            migrationBuilder.CreateTable(
                name: &quot;Estoque&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    MaterialId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false),
                    Operacao = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false),
                    Quantidade = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_Estoque&quot;, x =&gt; x.Id);
                    table.ForeignKey(
                        name: &quot;FK_Estoque_Material_MaterialId&quot;,
                        column: x =&gt; x.MaterialId,
                        principalTable: &quot;Material&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: &quot;Obra&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    Nome = table.Column&lt;string&gt;(type: &quot;character varying(80)&quot;, maxLength: 80, nullable: false),
                    Endereco = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    TipoObra = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false),
                    Descricao = table.Column&lt;string&gt;(type: &quot;text&quot;, nullable: false),
                    Valor = table.Column&lt;double&gt;(type: &quot;double precision&quot;, nullable: false),
                    PrazoConclusao = table.Column&lt;DateTime&gt;(type: &quot;timestamp without time zone&quot;, nullable: false),
                    OrcamentoId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_Obra&quot;, x =&gt; x.Id);
                    table.ForeignKey(
                        name: &quot;FK_Obra_Orcamento_OrcamentoId&quot;,
                        column: x =&gt; x.OrcamentoId,
                        principalTable: &quot;Orcamento&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: &quot;FuncionarioObra&quot;,
                columns: table =&gt; new
                {
                    FuncionariosId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false),
                    ObrasId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_FuncionarioObra&quot;, x =&gt; new { x.FuncionariosId, x.ObrasId });
                    table.ForeignKey(
                        name: &quot;FK_FuncionarioObra_Funcionario_FuncionariosId&quot;,
                        column: x =&gt; x.FuncionariosId,
                        principalTable: &quot;Funcionario&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: &quot;FK_FuncionarioObra_Obra_ObrasId&quot;,
                        column: x =&gt; x.ObrasId,
                        principalTable: &quot;Obra&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: &quot;ObraMaterial&quot;,
                columns: table =&gt; new
                {
                    Id = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false)
                        .Annotation(&quot;Npgsql:ValueGenerationStrategy&quot;, NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                    ObraId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false),
                    MaterialId = table.Column&lt;long&gt;(type: &quot;bigint&quot;, nullable: false),
                    DataHora = table.Column&lt;DateTime&gt;(type: &quot;timestamp without time zone&quot;, nullable: false),
                    Operacao = table.Column&lt;int&gt;(type: &quot;integer&quot;, nullable: false)
                },
                constraints: table =&gt;
                {
                    table.PrimaryKey(&quot;PK_ObraMaterial&quot;, x =&gt; x.Id);
                    table.ForeignKey(
                        name: &quot;FK_ObraMaterial_Material_MaterialId&quot;,
                        column: x =&gt; x.MaterialId,
                        principalTable: &quot;Material&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: &quot;FK_ObraMaterial_Obra_ObraId&quot;,
                        column: x =&gt; x.ObraId,
                        principalTable: &quot;Obra&quot;,
                        principalColumn: &quot;Id&quot;,
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateIndex(
                name: &quot;IX_Estoque_MaterialId&quot;,
                table: &quot;Estoque&quot;,
                column: &quot;MaterialId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_FuncionarioObra_ObrasId&quot;,
                table: &quot;FuncionarioObra&quot;,
                column: &quot;ObrasId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_Obra_OrcamentoId&quot;,
                table: &quot;Obra&quot;,
                column: &quot;OrcamentoId&quot;,
                unique: true);

            migrationBuilder.CreateIndex(
                name: &quot;IX_ObraMaterial_MaterialId&quot;,
                table: &quot;ObraMaterial&quot;,
                column: &quot;MaterialId&quot;);

            migrationBuilder.CreateIndex(
                name: &quot;IX_ObraMaterial_ObraId&quot;,
                table: &quot;ObraMaterial&quot;,
                column: &quot;ObraId&quot;);
        }

        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropTable(
                name: &quot;Estoque&quot;);

            migrationBuilder.DropTable(
                name: &quot;FuncionarioObra&quot;);

            migrationBuilder.DropTable(
                name: &quot;ObraMaterial&quot;);

            migrationBuilder.DropTable(
                name: &quot;Funcionario&quot;);

            migrationBuilder.DropTable(
                name: &quot;Material&quot;);

            migrationBuilder.DropTable(
                name: &quot;Obra&quot;);

            migrationBuilder.DropTable(
                name: &quot;Orcamento&quot;);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[10,9,10,10,0],[11,13,13,35,0],[13,35,26,18,0],[26,18,28,17,0],[28,17,28,18,0],[28,18,29,21,0],[29,21,29,67,0],[29,67,30,17,0],[30,17,30,18,0],[30,18,30,20,0],[32,13,34,35,0],[34,35,43,18,0],[43,18,45,17,0],[45,17,45,18,0],[45,18,46,21,0],[46,21,46,64,0],[46,64,47,17,0],[47,17,47,18,0],[47,18,47,20,0],[49,13,51,35,0],[51,35,61,18,0],[61,18,63,17,0],[63,17,63,18,0],[63,18,64,21,0],[64,21,64,65,0],[64,65,65,17,0],[65,17,65,18,0],[65,18,65,20,0],[67,13,69,35,0],[69,35,76,18,0],[76,18,78,17,0],[78,17,78,18,0],[78,18,79,21,0],[79,21,79,63,0],[79,63,80,21,0],[80,21,85,62,0],[85,62,86,17,0],[86,17,86,18,0],[86,18,86,20,0],[88,13,90,35,0],[90,35,101,18,0],[101,18,103,17,0],[103,17,103,18,0],[103,18,104,21,0],[104,21,104,60,0],[104,60,105,21,0],[105,21,110,62,0],[110,62,111,17,0],[111,17,111,18,0],[111,18,111,20,0],[113,13,115,35,0],[115,35,119,18,0],[119,18,121,17,0],[121,17,121,18,0],[121,18,122,21,0],[122,21,122,102,0],[122,102,123,21,0],[123,21,128,62,0],[128,62,129,21,0],[129,21,134,62,0],[134,62,135,17,0],[135,17,135,18,0],[135,18,135,20,0],[137,13,139,35,0],[139,35,147,18,0],[147,18,149,17,0],[149,17,149,18,0],[149,18,150,21,0],[150,21,150,68,0],[150,68,151,21,0],[151,21,156,62,0],[156,62,157,21,0],[157,21,162,62,0],[162,62,163,17,0],[163,17,163,18,0],[163,18,163,20,0],[165,13,168,39,0],[170,13,173,36,0],[175,13,179,31,0],[181,13,184,39,0],[186,13,189,35,0],[190,9,190,10,0],[193,9,193,10,0],[194,13,195,34,0],[197,13,198,42,0],[200,13,201,39,0],[203,13,204,38,0],[206,13,207,35,0],[209,13,210,31,0],[212,13,213,36,0],[214,9,214,10,0]]);
    </script>
  </body>
</html>